<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
  </head>
  <body>
    <input id="m" autocomplete="off" /><button>Send</button>
    <div style="width: 200px; height: 200px; background-color:red;"></div>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      $(function() {
        let socket;
        let gameId;

        $("button").click(function() {
          fetch("http://localhost:3000/joingame")
            .then(r => r.json())
            .then(r => {
              socket = io(`/${r.id}`);
              gameId = r.id;

              socket.on("action", function(msg) {
                console.log(msg);
              });
            });
        });

        $("div").click(function() {
          console.log("click");
          socket.emit("action", {
            action: "playCard",
            payload: { player: "black" }
          });
          return false;
        });
      });
    </script>
  </body>
</html>
